name: "Lint"
on:
  push:
jobs:
  check-format:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: install nix
        uses: cachix/install-nix-action@v19
      - name: import GPG key
        uses: crazy-max/ghaction-import-gpg@v5
        with:
          gpg_private_key: ${{ secrets.GPG_KEY }}
      - name: unlock repository secrets
        run: |
          nix profile install nixpkgs#git-crypt
          git-crypt unlock
      - name: check code format
        run: nix fmt
